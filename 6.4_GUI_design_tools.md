# 6.4. GUI design tools

In the previous submodules we have learn to build a graphical user interface from scratch. However, there are some tools that can help us to build a GUI in a faster way. In this submodule we will learn to use the Scene Builder tool to build a GUI.

Scene Builder is a visual layout tool that lets users quickly design JavaFX application user interfaces, without coding. Users can drag and drop UI components to a work area, modify their properties, apply style sheets, and the FXML code for the layout that they are creating is automatically generated in the background. The result is an FXML file that can then be combined with a Java project by binding the UI to the applicationâ€™s logic.

## 6.4.1. Installing Scene Builder

Scene Builder is a standalone design tool that can be used with any Java IDE to create JavaFX UI designs. It is developed by Gluon and delivered as part of the OpenJFX distribution. It is free to download and use, and it is available for Windows, macOS, and Linux.

To install Scene Builder, follow these steps:

1. Download the latest version of Scene Builder from the [Scene Builder website](https://gluonhq.com/products/scene-builder/). If you are using Windows, download the Windows installer (.msi). If you are using macOS, download the macOS installer.
2. Run the installer and follow the instructions to install Scene Builder on your computer.

## 6.4.2. Building the first application with Scene Builder

Our goal is to build a simple BMI calculator with Scene Builder. The final result will be the following:

![BMI calculator](./images/bmi_calculator.png)

There are various ways in which you can utilize Scene Builder to create a JavaFX application. In this submodule we will use the following approach:

1. Create a new JavaFX project in IntelliJ IDEA.
2. Add an empty FXML file to the project.
2. Create the UI design in Scene Builder. The design will be saved in the FXML file.
3. Add the event handlers to the FXML file in IntelliJ IDEA.

This is the recommended approach for beginners that provides a good balance between the use of Scene Builder and IntelliJ IDEA.

First, generate a new JavaFX project in IntelliJ IDEA, and add the `model`, `view` and `controller` packages into the `src` folder. To do so, follow the steps described in the previous submodules.

Then, add a new FXML file to the src/resources folder of the
project. To do so, right-click on the `resources` folder and select `New` > `XML` > `XML File`. Name the file `bmi_view.fxml` and click `OK`. IntelliJ Idea creates a simple FXML file for a user interface that has an `AnchorPane` as the root element.

At this point, open Scene Builder and load the FXML file that you have just created. To do so, click `Open Project` and select the `bmi_view.fxml` file. The Scene Builder window will look like this:

![Scene Builder](./images/scene_builder_newly_opened.png)

On the Hierarchy card on the left, you see the structure of the user interface. It just displays one node, the AnchorPane, in the user interface. As we want to replace the AnchorPane with the BorderPane, we need to delete the AnchorPane. To do so, select the AnchorPane in the Hierarchy card and press the `Delete` key. The AnchorPane will be removed from the user interface.

Now that the user interface has changed, we need to save the changes to the FXML file. To do so, click `File/Save` in Scene Builder. The FXML file will be updated with the changes that you have made.

If you take a quick peek at your code in IntelliJ IDEA, you will see that the FXML file has been updated with the changes that you have made in Scene Builder. The FXML file is now empty, as you have deleted the AnchorPane.

Now, let's build the following hierarchy into our user interface by dragging and dropping the components from the Containers and Controls cards on the left.

We follow these principles:
- In the NORTH area, we will place a Label with the text "BMI Calculator".
- In the CENTER area, there is a VBox than contains two HBox containers.
- Each HBox container contains a Label and a slider.
- In the SOUTH area, there is a HBox with two labels, one holding the text "BMI: " and the other one holding the result of the calculation.
- The HBox elements have proper padding.

As a consequence, the Hierarchy card on the left will look like this:

![Scene Builder](./images/sb_hierarchy.png)

The user inteface looks like this:

![Scene Builder](./images/sb_gui.png)

Now that the user interface is ready, we need to add event handlers to the sliders. We want the BMI update to be triggered when the user moves the sliders. To do so, proceed as follows:

1. In Scene Builder, select the first slider. Write `heightSlider` into the Id field. This will be the id of the slider.
2. Do the same for the second slider. Write `weightSlider` into the Id field.
3. Write `bmiLabel` into the Id field of the label that displays the BMI.
4. Click `File/Save` in Scene Builder to save the changes to the FXML file.

From now on, we work in IntelliJ IDEA. Open the `bmi_view.fxml` file and specify the event handlers for the sliders. To do so, locate the `Slider` elements in the FXML file and add the following attributes to them:

```xml
<Slider fx:id="heightSlider" onDragDetected="#updateBMI" onMouseDragged="#updateBMI" onMouseReleased="#updateBMI" ... />
<Slider fx:id="weightSlider" onDragDetected="#updateBMI" onMouseDragged="#updateBMI" onMouseReleased="#updateBMI" ... />
```

The three dots in the code above mark the pre-existing attributes of the `Slider` elements. Do not delete them, just add the new attributes to the existing ones.

We have now specified one event handler called `updateBMI` for three events: `onDragDetected`, `onMouseDragged` and `onMouseReleased`. The `updateBMI` method will be called when the user starts to drag the slider, when the user drags the slider, and when the user releases the slider. The same event handler is defined for both sliders.

Now, we need to implement the `updateBMI` method in the `BmiController` class. As a result, the class looks like this:

```java
package controller;

import view.BMI;
import javafx.fxml.FXML;
import javafx.scene.control.Label;
import javafx.scene.control.Slider;
import java.util.Locale;

public class BMIController {

    @FXML
    private Slider heightSlider;

    @FXML
    private Slider weightSlider;

    @FXML
    private Label bmiLabel;

    @FXML
    private void updateBMI() {
        System.out.println("updateBMI() called");
        double height = heightSlider.getValue()/100.0;
        double weight = weightSlider.getValue();
        double bmi = weight / Math.pow(height, 2);
        System.out.println("BMI: " + bmi);

        String bmiFormatted = String.format(Locale.US, "%.1f", bmi);
        bmiLabel.setText(bmiFormatted);
    }

    public static void main(String[] args) {
        BMI.launch(BMI.class);
    }
}
```

The `@FXML` annotations bind the attributes of the `BmiController` class to the elements of the user interface. The `updateBMI` method is called when the user interacts with the sliders. The method calculates the BMI and displays it in the `bmiLabel` label.

Finally, we need to specify the controller class in the FXML file. To do so, add the following attribute to the root element of the FXML file:

```xml
        fx:controller="controller.BMIController"
```

In the end, the FXML file looks like this:

```xml
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane fx:controller="controller.BMIController" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns="http://javafx.com/javafx/19" xmlns:fx="http://javafx.com/fxml/1">
    <top>
        <Label text="My BMI app" BorderPane.alignment="CENTER">
         <font>
            <Font size="24.0" />
         </font></Label>
    </top>
    <center>
        <VBox prefHeight="200.0" prefWidth="100.0" BorderPane.alignment="CENTER">
            <children>
                <HBox prefHeight="100.0" prefWidth="200.0" style="-fx-padding: 20;">
                    <children>
                        <Label style="-fx-padding: 10;" text="Length (cm):" />
                        <Slider fx:id="heightSlider" onDragDetected="#updateBMI" onMouseDragged="#updateBMI" onMouseReleased="#updateBMI" max="250.0" min="100.0" prefHeight="37.0" prefWidth="212.0" showTickLabels="true" showTickMarks="true" />
                    </children>
                </HBox>
                <HBox prefHeight="100.0" prefWidth="421.0" style="-fx-padding: 20;">
                    <children>
                        <Label style="-fx-padding: 10;" text="Weight (kg):" />
                        <Slider fx:id="weightSlider" onDragDetected="#updateBMI" onMouseDragged="#updateBMI" onMouseReleased="#updateBMI" blockIncrement="25.0" max="200.0" min="25.0" prefHeight="37.0" prefWidth="211.0" showTickLabels="true" showTickMarks="true" />
                    </children>
                </HBox>
            </children>
        </VBox>
    </center>
    <bottom>
        <HBox alignment="CENTER" prefHeight="100.0" prefWidth="200.0" BorderPane.alignment="CENTER">
            <children>
                <Label text="BMI: ">
               <font>
                  <Font size="18.0" />
               </font></Label>
                <Label fx:id="bmiLabel" text="0">
               <font>
                  <Font size="18.0" />
               </font></Label>
            </children>
        </HBox>
    </bottom>

</BorderPane>
```

Finally, we create the user interface class in the `view` package. The class is called `BMI` and it looks like this:

```java
package view;

import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.Parent;
import javafx.stage.Stage;
import javafx.fxml.FXMLLoader;

public class BMI extends Application {

    @Override
    public void start(Stage stage) throws Exception {
        FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("/bmi_view.fxml"));
        Parent root = fxmlLoader.load();

        stage.setScene(new Scene(root));
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}
```

In the `start` method, the FXML file is loaded and the contents of the user interface are displayed in a window.

At this point, you have learnt the basics of building a user interface with Scene Builder and JavaFX. You can now start to build your own user interfaces.

---
_This learning material has been produced with assistance from OpenAI's ChatGPT-4 and GitHub Copilot. These large language models have provided suggestions and solutions that have assisted the author in producing and supplementing the material. While their contribution has been significant, the final responsibility for the content and its correctness resides with the author._







